# MSPMetro canonical inventory
#
# NOTE: NO DOCKER. Hosts are configured with system packages + systemd.

# -------------------------------------------------------------------
# Publisher (authoritative write endpoint: MinIO + fanout replication)
# -------------------------------------------------------------------
[mspmetro_publisher]
# New publisher (high horsepower)
publisher ansible_host=144.76.5.115 ansible_user=root

# -------------------------------------------------------------------
# Source Box (ingestion + Postgres + editorial DB)
# -------------------------------------------------------------------
[mspmetro_source_box]
publisher

# -------------------------------------------------------------------
# Edges (serve the public site; pull content from nearest origin)
# -------------------------------------------------------------------
[mspmetro_edges]
# EU edge (Hetzner): also hosts IPFS gateway + onion vhost in Caddy
edge.eur.mspmetro.com ansible_host=78.46.226.98 ansible_user=root mspmetro_caddy_site=edge.eur.mspmetro.com mspmetro_caddy_hostnames=edge.eur.mspmetro.com,eur.mspmetro.com

# US edge (Linode)
edge.us.mspmetro.com ansible_host=172.236.125.212 ansible_user=root mspmetro_caddy_site=edge.us.mspmetro.com mspmetro_caddy_hostnames=edge.us.mspmetro.com,us.mspmetro.com

[mspmetro_edge_eur]
edge.eur.mspmetro.com

[mspmetro_edge_us]
edge.us.mspmetro.com

# Optional: treat some edges as "world" for origin selection in deploy_brief.yml
[mspmetro_edge_world]
edge.us.mspmetro.com

# -------------------------------------------------------------------
# IPFS/IPNS publishing host(s)
# -------------------------------------------------------------------
[mspmetro_ipfs]
edge.eur.mspmetro.com

# -------------------------------------------------------------------
# Origins (S3-compatible object storage) - NOT SSH targets
#
# These are "local" pseudo-hosts used by ops/ansible/deploy_brief.yml to run
# make targets on the controller and then trigger pulls on edges.
# -------------------------------------------------------------------
[mspmetro_origins]
origin_global ansible_connection=local mspmetro_publish_target=publish-edge-global
origin_world ansible_connection=local mspmetro_publish_target=publish-edge-world
origin_earth ansible_connection=local mspmetro_publish_target=publish-edge-earth

[all:vars]
project=mspmetro
