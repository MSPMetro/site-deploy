# MSPMetro canonical inventory
#
# NOTE: NO DOCKER. Hosts are configured with system packages + systemd.

# -------------------------------------------------------------------
# Publisher (authoritative write endpoint: MinIO + fanout replication)
# -------------------------------------------------------------------
[mspmetro_publisher]
# Publisher (Scaleway DNS: source.mspmetro.com)
source.mspmetro.com ansible_host=source.mspmetro.com ansible_user=root mspmetro_ipv6=2a01:4f8:190:8069::2

# -------------------------------------------------------------------
# Source Box (ingestion + Postgres + editorial DB)
# -------------------------------------------------------------------
[mspmetro_source_box]
source.mspmetro.com

# -------------------------------------------------------------------
# Edges (serve the public site; pull content from nearest origin)
# -------------------------------------------------------------------
[mspmetro_edges]
# EU edge (Hetzner): also hosts IPFS gateway + onion vhost in Caddy
edge-eur.mspmetro.com ansible_host=78.46.226.98 ansible_user=root mspmetro_caddy_site=edge.eur.mspmetro.com mspmetro_caddy_hostnames=edge-eur.mspmetro.com,edge.eur.mspmetro.com,eur.mspmetro.com

# US edge (Linode)
edge-ord.mspmetro.com ansible_host=172.236.125.212 ansible_user=root mspmetro_caddy_site=edge-ord.mspmetro.com mspmetro_caddy_hostnames=edge-ord.mspmetro.com,us.mspmetro.com

# NY edge (new): bootstrap via ops/ansible/bootstrap_edge.yml
edge-ny.mspmetro.com ansible_host=23.95.148.154 ansible_user=root mspmetro_caddy_site=edge-ny.mspmetro.com mspmetro_caddy_hostnames=edge-ny.mspmetro.com

# PDX edge (new): bootstrap via ops/ansible/bootstrap_edge.yml
edge-pdx.mspmetro.com ansible_host=5.78.135.48 ansible_user=root mspmetro_ipv6=2a01:4ff:1f0:77ee::1 mspmetro_caddy_site=edge-pdx.mspmetro.com mspmetro_caddy_hostnames=edge-pdx.mspmetro.com

[mspmetro_edge_eur]
edge-eur.mspmetro.com

[mspmetro_edge_us]
edge-ord.mspmetro.com
edge-ny.mspmetro.com
edge-pdx.mspmetro.com

# Optional: treat some edges as origin-do for origin selection in deploy_brief.yml
[mspmetro_edge_do]
edge-ord.mspmetro.com
edge-pdx.mspmetro.com

# -------------------------------------------------------------------
# IPFS/IPNS publishing host(s)
# -------------------------------------------------------------------
[mspmetro_ipfs]
edge-eur.mspmetro.com

# -------------------------------------------------------------------
# Origins (S3-compatible object storage) - NOT SSH targets
#
# These are "local" pseudo-hosts used by ops/ansible/deploy_brief.yml to run
# make targets on the controller and then trigger pulls on edges.
# -------------------------------------------------------------------
[mspmetro_origins]
origin_scw ansible_connection=local mspmetro_publish_target=publish-edge-global
origin_do ansible_connection=local mspmetro_publish_target=publish-edge-do
origin_het ansible_connection=local mspmetro_publish_target=publish-edge-het

[all:vars]
project=mspmetro
